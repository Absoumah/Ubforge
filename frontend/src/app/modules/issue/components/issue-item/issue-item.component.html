<div class="issue-item">
    <div class="issue-header">
        <div class="issue-title">
            <h3>{{ issue.title }}</h3>
            <span class="category-badge">{{ issue.category }}</span>
        </div>
        <div class="issue-dates">
            <span>Reported: {{ issue.reportedDate | date:'shortDate' }}</span>
            <span>Due: {{ issue.dueDate | date:'shortDate' }}</span>
        </div>
        <div class="issue-actions">
            <button (click)="edit.emit(issue.id)">Edit</button>
            <button (click)="delete.emit(issue.id)">Delete</button>
        </div>
    </div>

    <p class="issue-description">{{ issue.description }}</p>

    <div class="issue-tasks">
        <div class="tasks-header" (click)="toggleTasks()">
            <h4>Tasks ({{ getCompletedTasksCount() }}/{{ issue.tasks.length }})</h4>
            <span class="toggle-icon">{{ isTasksExpanded ? '▼' : '▶' }}</span>
        </div>
        <div class="tasks-list" *ngIf="isTasksExpanded">
            <div class="task-item" *ngFor="let task of issue.tasks">
                <input type="checkbox" [checked]="task.completed" disabled>
                <span [class.completed]="task.completed">{{ task.description }}</span>
            </div>
        </div>
    </div>
</div>