<div class="issue-item" (click)="onIssueClick()">
    <div class="issue-header">
        <div class="issue-title">
            <h3>{{ issue.title }}</h3>
            <span class="category-badge">{{ issue.category }}</span>
            <app-priority-badge [priority]="issue.priority"></app-priority-badge>
        </div>
        <div class="issue-dates">
            <span>Reported: {{ issue.reportedDate | date: 'shortDate' }}</span>
            <span>Due: {{ issue.dueDate | date: 'shortDate' }}</span>
        </div>
        <span class="comment-count">{{commentCount}} comments</span>
    </div>

    <p class="issue-description">{{ issue.description }}</p>

    <div class="issue-tasks">
        <app-task-navigator [tasks]="tasks" [completedCount]="getCompletedTasksCount()"
            (statusChange)="onTaskStatusChange($event)">
        </app-task-navigator>
    </div>

    <div class="issue-actions">
        <button class="edit-button" (click)="$event.stopPropagation(); edit.emit(issue.id)"></button>
        <button class="delete-button" (click)="$event.stopPropagation(); delete.emit(issue.id)"></button>
    </div>
</div>